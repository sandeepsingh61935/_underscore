<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>_underscore</title>

  <link rel="stylesheet" href="../popup/popup.css" />
</head>

<body>
  <div id="app">
    <!-- Loading State -->
    <div id="loading-state" class="state">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>

    <!-- Error State -->
    <div id="error-state" class="state hidden"></div>

    <!-- Main UI -->
    <div id="main-ui" class="state hidden">
      <header>
        <h1>⚡ _underscore</h1>


        <!-- Sliding Provider Drawer (hidden by default) -->
        <div class="provider-drawer" role="menu" aria-label="Sign in with">
          <button class="provider-option" data-provider="google" aria-label="Sign in with Google" title="Google">
            <!-- Icon injected by ProviderDrawer -->
          </button>
          <button class="provider-option" data-provider="apple" aria-label="Sign in with Apple" title="Apple">
            <!-- Icon injected by ProviderDrawer -->
          </button>
          <button class="provider-option" data-provider="x" aria-label="Sign in with X" title="X (Twitter)">
            <!-- Icon injected by ProviderDrawer -->
          </button>
          <button class="provider-option" data-provider="facebook" aria-label="Sign in with Facebook" title="Facebook">
            <!-- Icon injected by ProviderDrawer -->
          </button>
        </div>

        <div id="auth-container" class="auth-wrapper">
          <!-- Injected by Controller: Login Button or User Avatar -->
        </div>
      </header>

      <main>
        <section class="mode-section">
          <div class="mode-options">
            <button class="mode-option active" data-mode="walk" aria-label="Walk mode">
              Walk
            </button>
            <button class="mode-option" data-mode="sprint" aria-label="Sprint mode">
              Sprint
            </button>
            <button class="mode-option locked" data-mode="vault" aria-label="Vault mode" aria-disabled="true">
              Vault
            </button>
            <div class="mode-underline"></div>
          </div>
          <p class="mode-hint">sign in to unlock vault</p>
        </section>

        <section class="stats-card">
          <span class="stat-value" id="highlight-count">0</span>
          <span class="stat-label">Highlights</span>
        </section>

        <section class="quick-actions">
          <button id="clear-all" class="md-filled-button">Clear All</button>
        </section>

        <section class="info">
          <p><strong>Sprint Mode</strong>: Ephemeral highlighting</p>
          <ul>
            <li>Double-tap to highlight</li>
            <li>Ctrl+U to highlight selection</li>
            <li>Click to remove</li>
            <li>Ctrl+Shift+U to clear all</li>
          </ul>
        </section>
      </main>

      <footer>
        <span>v0.2.0 • Phase 4</span>
      </footer>

      <!-- Caution Panel (hidden by default, slides up) -->
      <div class="caution-panel" role="alertdialog" aria-labelledby="caution-title" aria-modal="true">
        <div class="caution-content">
          <div class="caution-icon">⚠️</div>
          <h3 id="caution-title" class="caution-title">Logout Required</h3>
          <p class="caution-message">
            Switching to this mode will log you out. Your highlights won't sync to the cloud.
          </p>
          <div class="caution-actions">
            <button class="caution-cancel" aria-label="Cancel">Cancel</button>
            <button class="caution-confirm" aria-label="Confirm logout">Logout & Switch</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TypeScript Controller (no inline scripts!) -->
  <script type="module" src="../popup/main.ts"></script>
</body>

</html>